
import pyaudio
import numpy as np
import threading
import cv2
import screeninfo
from AudioReader import AudioReader
from Renderer import Renderer

# AUDIO VARIABLES
CHUNK = 480
FORMAT = pyaudio.paFloat32
CHANNELS = 3
RATE = 48000
INDEX = 0
MONITOR = 0





screen = screeninfo.get_monitors()[MONITOR]


width, height = screen.width, screen.height

width = 2560
height = 1600

bordersize = int((width-height)/2)
print(bordersize)

initialPhaseState = True

reader = AudioReader(CHUNK,FORMAT,CHANNELS,RATE,INDEX)
renderer = Renderer(reader, CHUNK,height,bordersize,initialPhaseState)
                
rendering = True
reader.updateRenderState(rendering)

a = threading.Thread(target=reader.readFrames)
a.start()

v = threading.Thread(target=renderer.renderVideo())
v.start()

while rendering:
    rendering = renderer.getRendering()



reader.updateRenderState(rendering)

cv2.destroyAllWindows()


exit()
